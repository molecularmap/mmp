
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MolecularMap â€” The Molecular Spiral Galaxy</title>
<script src="https://d3js.org/d3.v7.min.js"></script>
<style>
  html, body {
    margin: 0; padding: 0; width: 100%; height: 100%;
    font-family: 'Segoe UI', system-ui, sans-serif;
    color: #e0e7ff; background: #000010; overflow-x: hidden;
  }
  #galaxy-bg {
    position: fixed; top: 0; left: 0; width: 100vw; height: 100vh;
    z-index: 0; cursor: crosshair;
  }
  main {
    position: relative; z-index: 2; max-width: 900px;
    margin: 0 auto; padding: 4rem 2rem;
    background: rgba(10,15,35,0.75); backdrop-filter: blur(12px);
    border-radius: 12px; box-shadow: 0 0 40px rgba(0,0,0,0.6);
  }
  h1,h2{color:#c7d2fe;} p{color:#cbd5e1;line-height:1.6;} section{margin-bottom:3rem;}
  a.btn{
    display:inline-block;margin-top:1rem;padding:0.6rem 1.2rem;
    border-radius:8px;font-weight:500;text-decoration:none;color:white;
    transition:background 0.2s,transform 0.2s;
  }
  a.btn:hover{opacity:.9;transform:scale(1.03);}
  .disease{background:#dc2626}.bioassay{background:#0891b2}
  .nutrition{background:#16a34a}.preventive{background:#15803d}
  .sonified{background:#7e22ce}.imagenet{background:#1d4ed8}.galaxy{background:#4f46e5}
  footer{text-align:center;padding:2rem;font-size:.9rem;color:#94a3b8}
  #fullscreenGalaxy{
    display:none;position:fixed;inset:0;z-index:999;
    background:radial-gradient(circle at 50% 50%,#0b1126 0%,#000010 100%);
  }
  #closeGalaxy{
    position:absolute;top:1rem;right:1rem;color:#e0e7ff;
    background:rgba(0,0,0,0.4);border:1px solid #64748b;border-radius:6px;
    padding:0.4rem 0.8rem;cursor:pointer;
  }
  #closeGalaxy:hover{background:rgba(255,255,255,0.1);}
  text.label{fill:#e0e7ff;font-size:9px;pointer-events:none;opacity:0;}
  /* --- Legend overlay --- */
  #legend {
    position: absolute;
    top: 1rem; left: 1rem;
    background: rgba(15,23,42,0.6);
    border: 1px solid rgba(255,255,255,0.1);
    border-radius: 8px;
    padding: 0.6rem 1rem;
    color: #e2e8f0;
    font-size: 0.85rem;
    z-index: 1000;
    animation: fadeIn 1s ease-in;
  }
  #legend div { display:flex; align-items:center; margin:0.3rem 0; }
  #legend span.color {
    display:inline-block;
    width:14px; height:14px;
    border-radius:50%;
    margin-right:8px;
  }
  @keyframes fadeIn { from{opacity:0;} to{opacity:1;} }
</style>
</head>
<body>

<svg id="galaxy-bg"></svg>

<main>
  <h1>ðŸŒŒ MolecularMap</h1>
  <p>The worldâ€™s first multimodal AI platform unifying chemistry, biology, medicine, and materials â€” visualized as a molecular spiral galaxy.</p>

  <section>
    <h2>Disease-Centered Search</h2>
    <p>Explore molecules through the lens of health and medicine â€” connecting pathways, compounds, and therapeutic opportunities.</p>
    <a href="disease.html" class="btn disease">ðŸ’Š Explore Disease Networks</a>
  </section>

  <section>
    <h2>Bioassay & Diagnostics-Centered Search</h2>
    <p>Explore molecules through experimental validation and clinical measurement â€” from high-throughput assays to diagnostic biomarkers.</p>
    <a href="bioassay.php" class="btn bioassay">ðŸ§« Explore Bioassays</a>
  </section>

  <section>
    <h2>Nutrition-Centered Search</h2>
    <p>Uncover how nutrients and natural compounds influence metabolism, cellular pathways, and wellness.</p>
    <a href="nutrition.html" class="btn nutrition">ðŸ¥— Explore Nutrition Molecules</a>
  </section>

  <section>
    <h2>Preventive Health-Centered Search</h2>
    <p>Discover molecules that support resilience and longevity â€” tracing how supplements and molecular modulators protect against disease onset.</p>
    <a href="preventive.html" class="btn preventive">ðŸŒ¿ Explore Preventive Health Molecules</a>
  </section>

  <section>
    <h2>Sonified Molecules</h2>
    <p>Our patented framework converts molecular and spectral data into audio for AI learning â€” enabling multimodal models that train faster and achieve higher accuracy.</p>
    <a href="moaudionet.com" class="btn sonified">ðŸŽµ Explore Sonified Molecules</a>
  </section>

  <section>
    <h2>The ImageNet of Molecules</h2>
    <p>MolecularMap isnâ€™t just a knowledge graph â€” itâ€™s the foundational dataset for molecular AI, fueling discovery across chemistry, biology, and health.</p>
    <a href="imagenet.html" class="btn imagenet">ðŸ§  Explore Molecular ImageNet</a>
  </section>

  <section style="text-align:center;">
    <a href="#" id="openGalaxy" class="btn galaxy">ðŸ”­ Explore Full Galaxy View</a>
  </section>
</main>

<footer>MolecularMap Â© 2014â€“2025 â€” The AI Galaxy of Molecules</footer>

<div id="fullscreenGalaxy">
  <button id="closeGalaxy">âœ– Close</button>
  <div id="legend">
    <strong>Color Legend</strong>
    <div><span class="color" style="background:#f87171;"></span> Disease</div>
    <div><span class="color" style="background:#38bdf8;"></span> Drug</div>
    <div><span class="color" style="background:#facc15;"></span> Pathway</div>
    <div><span class="color" style="background:#4ade80;"></span> Nutrient</div>
  </div>
  <svg id="fullscreenSVG" width="100%" height="100%"></svg>
</div>

<script>
// === Floating background ===
const width = window.innerWidth, height = window.innerHeight;
const svgBG = d3.select("#galaxy-bg").attr("width", width).attr("height", height);
const gBG = svgBG.append("g");
const nodesBG = d3.range(500).map(() => ({
  x: Math.random()*width, y: Math.random()*height,
  vx:(Math.random()-0.5)*0.3, vy:(Math.random()-0.5)*0.3,
  r:Math.random()*2+0.5,
  color:["#38bdf8","#a855f7","#facc15","#22d3ee","#4ade80"][Math.floor(Math.random()*5)]
}));
const nodeBG = gBG.selectAll("circle").data(nodesBG).enter()
  .append("circle").attr("r",d=>d.r).attr("fill",d=>d.color).attr("opacity",0.8);
let mouseX=width/2, mouseY=height/2;
window.addEventListener("mousemove",e=>{mouseX=e.clientX;mouseY=e.clientY;});
d3.timer(()=>{
  const parallaxX=(mouseX-width/2)*0.0004, parallaxY=(mouseY-height/2)*0.0004;
  nodesBG.forEach(n=>{n.x+=n.vx+parallaxX;n.y+=n.vy+parallaxY;
    if(n.x<0||n.x>width) n.vx*=-1;
    if(n.y<0||n.y>height) n.vy*=-1;});
  nodeBG.attr("cx",d=>d.x).attr("cy",d=>d.y)
        .attr("opacity",d=>0.5+0.5*Math.sin(Date.now()/5000+d.x));
});

// === Fullscreen Spiral Galaxy ===
document.getElementById("openGalaxy").onclick=function(){
  document.getElementById("fullscreenGalaxy").style.display="block";
  drawSpiralGalaxy();
};
document.getElementById("closeGalaxy").onclick=function(){
  document.getElementById("fullscreenGalaxy").style.display="none";
};

function drawSpiralGalaxy(){
  const svgFS = d3.select("#fullscreenSVG");
  const w = window.innerWidth, h = window.innerHeight;
  svgFS.selectAll("*").remove();
  const g = svgFS.append("g");

  fetch("molecularmap_merged.json")
    .then(r=>r.json())
    .then(data=>{
      const color = d3.scaleOrdinal()
        .domain(["disease","drug","pathway","nutrient"])
        .range(["#f87171","#38bdf8","#facc15","#4ade80"]);

      const nodes = data.nodes;
      const links = data.links;

      // --- Spiral layout ---
      const centerX = w/2, centerY = h/2;
      const arms = 4;
      const radiusScale = d3.scaleLinear().domain([0,nodes.length]).range([20,Math.min(w,h)/2.2]);
      const angleOffset = Math.PI / arms;

      nodes.forEach((d,i)=>{
        const cat = d.category || "pathway";
        const armIndex = ["disease","drug","pathway","nutrient"].indexOf(cat);
        const angle = armIndex*angleOffset + (i/80)*0.35;
        const r = radiusScale(i%nodes.length);
        d.x = centerX + Math.cos(angle)*r;
        d.y = centerY + Math.sin(angle)*r + Math.sin(i/20)*15;
      });

      const link = g.selectAll("line").data(links).enter()
        .append("line").attr("stroke","#475569").attr("stroke-opacity",0.2)
        .attr("stroke-width",0.5);
      const node = g.selectAll("circle").data(nodes).enter()
        .append("circle")
        .attr("r",3)
        .attr("fill",d=>color(d.category||"pathway"))
        .attr("opacity",0.9)
        .on("click",(e,d)=>{
          if(d.category==="disease")
            window.open(`disease.html?q=${encodeURIComponent(d.id)}`,"_blank");
          else
            window.open(`molecularmap.html?q=${encodeURIComponent(d.id)}`,"_blank");
        });
      const label = g.selectAll("text").data(nodes).enter()
        .append("text").attr("class","label").attr("text-anchor","middle").text(d=>d.id);

      // --- Galaxy rotation ---
      let angle = 0;
      d3.timer(()=>{
        angle += 0.0008;
        g.attr("transform",`rotate(${angle*180/Math.PI},${centerX},${centerY})`);
      });

      // --- Zoom ---
      const zoom = d3.zoom().scaleExtent([0.2,6]).on("zoom",e=>{
        g.attr("transform",e.transform);
        const scale=e.transform.k;
        label.attr("opacity",scale>2?1:0);
      });
      svgFS.call(zoom);

      function update(){
        link.attr("x1",d=>getNode(d.source).x)
            .attr("y1",d=>getNode(d.source).y)
            .attr("x2",d=>getNode(d.target).x)
            .attr("y2",d=>getNode(d.target).y);
        node.attr("cx",d=>d.x).attr("cy",d=>d.y);
        label.attr("x",d=>d.x).attr("y",d=>d.y-6);
      }
      function getNode(ref){return typeof ref==="object"?ref:nodes.find(n=>n.id===ref);}
      update();
    });
}
</script>
</body>
</html>

